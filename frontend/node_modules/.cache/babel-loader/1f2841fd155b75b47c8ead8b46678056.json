{"ast":null,"code":"import _slicedToArray from\"C:/Users/STW/OneDrive/Dokumenty/VSC/projekt na studia/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import'bootstrap/dist/css/bootstrap.css';import{Form,Button,Accordion}from\"react-bootstrap\";import'./styles/object.css';import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faArrowLeft}from\"@fortawesome/free-solid-svg-icons\";import{useNavigate}from\"react-router-dom\";import{ObjectApi}from\"../apis\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditObjectByApi(){var _useState=useState({id:\"\",description:\"\",value:\"\"}),_useState2=_slicedToArray(_useState,2),object=_useState2[0],setObject=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),descritpion=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),objectValue=_useState6[0],setObjectValue=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),resStatus=_useState8[0],setResStatus=_useState8[1];var navigate=useNavigate();var location=window.location.toString();var queriedObject=location.split('?')[1];var objectApi=new ObjectApi();useEffect(function(){try{var getObjectReq={objectId:queriedObject};objectApi.getObject(getObjectReq).then(function(response){console.log(\"Tada:\",response);if(object!=undefined)setObject(response);});}catch(err){console.error(err);}},[]);var EditObject=function EditObject(event){try{event.preventDefault();console.log(\"object przed fetchem\",object);if(object.id!=\"\"&&descritpion!=\"\"&&objectValue!=\"\"){var editTankReq={objectId:object.id,modelObject:object};objectApi.editObject(editTankReq).then(function(response){return setResStatus(200);});}setTimeout(function(){return navigate('/object');},1500);}catch(err){console.error(err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowLeft,className:\"fontAwesomeButton\",onClick:function onClick(){return navigate('/');}}),\"    Edycja zbiornika\"]}),/*#__PURE__*/_jsx(\"hr\",{}),resStatus==0?/*#__PURE__*/_jsx(\"div\",{role:\"alert\"}):object.id!=\"\"&&descritpion!=\"\"&&objectValue!=\"\"?resStatus==200?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success\",role:\"alert\",children:[document.getElementById('txtDescription').value=\"\",document.getElementById('txtObjectValue').value=\"\",/*#__PURE__*/_jsx(\"strong\",{children:\"Sukces!\"}),\" Obiekt zosta\\u0142 zaktualizowany.\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"B\\u0142\\u0105d!\"}),\" Obiekt nie zosta\\u0142 zaktualizowany. Kod b\\u0142\\u0119du: \",resStatus.toString()]}):/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:\"Uzupe\\u0142nij wszystkie pola!\"}),Object(object)['id']!=undefined?/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsx(\"h3\",{children:Object(object)['display_name']}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(Accordion,{alwaysOpen:true,children:[/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:\"0\",children:[/*#__PURE__*/_jsxs(Accordion.Header,{children:[\"Opis obiektu: \",object.description]}),/*#__PURE__*/_jsx(Accordion.Body,{children:/*#__PURE__*/_jsx(Form.Control,{id:\"txtDescription\",type:\"text\",onChange:function onChange(event){object.description=event.target.value;},placeholder:\"Podaj nowy opis obiektu...\"})})]}),/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:\"1\",children:[/*#__PURE__*/_jsxs(Accordion.Header,{children:[\"Warto\\u015B\\u0107 obiektu: \",object.value]}),/*#__PURE__*/_jsx(Accordion.Body,{children:/*#__PURE__*/_jsx(Form.Control,{id:\"txtObjectValue\",type:\"text\",onChange:function onChange(event){object.value=event.target.value;},placeholder:\"Podaj nową wartość obiektu...\"})})]}),/*#__PURE__*/_jsxs(Accordion.Item,{eventKey:\"2\",children:[/*#__PURE__*/_jsx(Accordion.Header,{children:\"Id obiektu\"}),/*#__PURE__*/_jsx(Accordion.Body,{children:/*#__PURE__*/_jsx(Form.Text,{children:object.id})})]}),/*#__PURE__*/_jsx(Button,{as:\"input\",className:\"btn-secondary\",variant:\"secondary\",onClick:function onClick(e){return EditObject(e);},value:\"Edytuj\"}),/*#__PURE__*/_jsx(Form.Text,{children:\"* - wy\\u015Bwietlane tre\\u015Bci przed edycj\\u0105 to warto\\u015Bci danego obiektu w bazie danych.\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"tank\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Nie znaleziono takiego obiektu w bazie danych\"})})]});}","map":{"version":3,"names":["React","useEffect","useState","Form","Button","Accordion","FontAwesomeIcon","faArrowLeft","useNavigate","ObjectApi","EditObjectByApi","id","description","value","object","setObject","descritpion","setDescription","objectValue","setObjectValue","resStatus","setResStatus","navigate","location","window","toString","queriedObject","split","objectApi","getObjectReq","objectId","getObject","then","response","console","log","undefined","err","error","EditObject","event","preventDefault","editTankReq","modelObject","editObject","setTimeout","document","getElementById","Object","target","e"],"sources":["C:/Users/STW/OneDrive/Dokumenty/VSC/projekt na studia/frontend/src/pages/editObject.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport 'bootstrap/dist/css/bootstrap.css';\nimport { Form, Button, Accordion } from \"react-bootstrap\";\nimport './styles/object.css';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { useNavigate } from \"react-router-dom\";\nimport type { ModelObject as Object } from \"../models\";\nimport { EditObjectRequest, GetObjectRequest, ObjectApi } from \"../apis\";\n\nexport default function EditObjectByApi(): JSX.Element {\n    let [object, setObject] = useState<Object>({ id: \"\", description: \"\", value: \"\" });\n    let [descritpion, setDescription] = useState<string>(\"\");\n    let [objectValue, setObjectValue] = useState<string>(\"\");\n    let [resStatus, setResStatus] = useState<number>(0);\n\n    const navigate = useNavigate();\n    const location: String = window.location.toString();\n    const queriedObject: string = location.split('?')[1];\n    const objectApi: ObjectApi = new ObjectApi();\n\n    useEffect(() => {\n        try {\n            let getObjectReq: GetObjectRequest = { objectId: queriedObject };\n            objectApi.getObject(getObjectReq)\n                .then(response => {\n                    console.log(\"Tada:\", response);\n                    if (object != undefined)\n                        setObject(response);\n                })\n        } catch (err) {\n            console.error(err)\n        }\n    }, [])\n\n    const EditObject = (event: React.MouseEvent) => {\n        try {\n            event.preventDefault();\n            console.log(\"object przed fetchem\", object)\n            if (object.id != \"\" && descritpion != \"\" && objectValue != \"\") {\n                const editTankReq: EditObjectRequest = { objectId: object.id, modelObject: object };\n                objectApi.editObject(editTankReq).then(response => setResStatus(200));\n            }\n            setTimeout(() => navigate('/object'), 1500);\n        } catch (err) {\n            console.error(err);\n        }\n    }\n\n    return (\n        <div className=\"body\">\n            <h3>{<FontAwesomeIcon icon={faArrowLeft} className='fontAwesomeButton' onClick={() => navigate('/')} />}    Edycja zbiornika</h3>\n            <hr />\n            {resStatus == 0 ?\n                <div role=\"alert\"></div>\n                :\n                object.id != \"\" && descritpion != \"\" && objectValue != \"\" ?\n                    (resStatus == 200 ?\n                        <div className=\"alert alert-success\" role=\"alert\">\n                            {(document.getElementById('txtDescription') as HTMLInputElement).value = \"\"}\n                            {(document.getElementById('txtObjectValue') as HTMLInputElement).value = \"\"}\n                            <strong>Sukces!</strong> Obiekt został zaktualizowany.\n                        </div>\n                        :\n                        (\n                            <div className=\"alert alert-danger\" role=\"alert\">\n                                <strong>Błąd!</strong> Obiekt nie został zaktualizowany. Kod błędu: {resStatus.toString()}\n                            </div>))\n                    :\n                    <div className=\"alert alert-danger\" role=\"alert\">\n                        Uzupełnij wszystkie pola!\n                    </div>\n            }\n\n            {Object(object)['id'] != undefined ?\n                <div className=\"body\">\n                    <h3>{Object(object)['display_name']}</h3>\n                    <hr />\n                    <Accordion alwaysOpen>\n                        <Accordion.Item eventKey=\"0\">\n                            <Accordion.Header>Opis obiektu: {object.description}</Accordion.Header>\n                            <Accordion.Body>\n                                <Form.Control id=\"txtDescription\" type=\"text\"\n                                    onChange={(event) => { object.description = event.target.value }}\n                                    placeholder={\"Podaj nowy opis obiektu...\"} />\n                            </Accordion.Body>\n                        </Accordion.Item>\n                        <Accordion.Item eventKey=\"1\">\n                            <Accordion.Header>Wartość obiektu: {object.value}</Accordion.Header>\n                            <Accordion.Body>\n                                <Form.Control id=\"txtObjectValue\" type=\"text\"\n                                    onChange={(event) => { object.value = event.target.value }}\n                                    placeholder={\"Podaj nową wartość obiektu...\"} />\n                            </Accordion.Body>\n                        </Accordion.Item>\n                        <Accordion.Item eventKey=\"2\">\n                            <Accordion.Header>Id obiektu</Accordion.Header>\n                            <Accordion.Body>\n                                <Form.Text>{object.id}</Form.Text>\n                            </Accordion.Body>\n                        </Accordion.Item>\n                        <Button as=\"input\" className=\"btn-secondary\" variant=\"secondary\" onClick={(e) => EditObject(e)} value=\"Edytuj\" />\n                        <Form.Text>* - wyświetlane treści przed edycją to wartości danego obiektu w bazie danych.</Form.Text>\n                    </Accordion>\n\n                </div>\n                :\n                <div className=\"tank\">\n                    <h3>Nie znaleziono takiego obiektu w bazie danych</h3>\n                </div>\n            }\n        </div>\n\n\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}